{% extends 'layouts/base.html' %}
{% load leaflet_tags %}
{% load geojson_tags %}

{% block title %} Projects General {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}
{% leaflet_js plugins="forms" %}
{% leaflet_css plugins="forms" %}

<style type="text/css">


  #gis {
      width:100%;
      height:600px;
      }
 
     </style> 
{% endblock stylesheets %}

{% block body_class %} g-sidenav-show bg-gray-100 {% endblock %}

{% block content %}

  <div class="container-fluid py-4">

    <div class="row">
      <div class="col-lg-12 col-12 mx-auto">
        <form enctype="multipart/form-data" method="post">
          {% csrf_token %}
          {% if form.errors %}
          {% for field in form %}
              {% for error in field.errors %}
                  <div class="alert alert-danger text-white">
                      <strong>{{ error|escape }}</strong>
                        {{ field.label|capfirst }}
                  </div>
              {% endfor %}
          {% endfor %}

          {% for error in form.non_field_errors %}
              <div class="alert alert-danger text-white">
                  <strong>{{ error|escape }}</strong>
              </div>
          {% endfor %}
      {% endif %}
        <div class="card card-body mt-4">
          <!--h6 class="mb-0">New Project</h6>
          <p class="text-sm mb-0">Create new project</p-->
            <div class="row">
              <div class="col-7">
                {% if not form.instance.id %}
                <h3>Nueva finca</h3>
                {% else %}
                    <h3>Actualizar finca:  <span>'{% firstof farm.name|default_if_none:"-" %}'</span></h3>
                    <input type="text" id="idfarm" value="{{ farm.id }}" style="visibility: hidden">
                {% endif %}
              
              </div>
              <div class="col-5">
                <div class="d-flex justify-content-end">
                  <button type="submit" class="btn btn-primary btn-large btn-sm m-b-xm mx-1"><i class="fa fa-save"></i>&nbsp;&nbsp;Guardar</button>
                  <a href="{% url 'ganaclima:farm_list' %}" class="btn btn-danger btn-large btn-sm m-b-xm mx-1"><i class="fa fa-undo"></i>&nbsp;&nbsp;Cancelar</a>

                </div>
              </div>

            </div>

          <hr class="horizontal dark my-3">


          <div class="row mb-2">
            <div class="col-3">
              <div class="form-group">
                <h6>{{ form.name.label }} {% if form.name.field.required %}<span>*</span>{% endif %}</h6>
                {{ form.name }}
              </div>
            </div>
            <div class="col-3">
              <div class="form-group">
                <h6>{{ form.codigo.label }} {% if form.codigo.field.required %}<span>*</span>{% endif %}</h6>
                {{ form.codigo }}
              </div>                
              
            </div>
            <div class="col-3">
              <div class="form-group">
                <h6>{{ form.provincia.label }} {% if form.provincia.field.required %}<span>*</span>{% endif %}</h6>
                {{ form.provincia }}
              </div>
            </div>
            <div class="col-3">
              <div class="form-group">
                <h6>{{ form.producto.label }} {% if form.producto.field.required %}<span>*</span>{% endif %}</h6>
                {{ form.producto }}
              </div>
            </div>

          </div>

          <div class="row">
            <div class="col-3">
              <div class="form-group">
                <h6>{{ form.pasto_principal.label }} {% if form.pasto_principal.field.required %}<span>*</span>{% endif %}</h6>
                {{ form.pasto_principal }}
              </div>                
              
            </div>
          </div>

 
        </div>
        <div class="card mt-4" id="geo">
          <div class="card-header">
            <h5>Localizacion {% if form.geom.field.required %}<span>*</span>{% endif %}</h5>
          </div>
          <div class="card-body ">
          <div class="card-body d-sm-flex pt-0">
              {{form.geom}}
          </div>
        </div>
      </div>
    </div>

    {% include "includes/footer.html" %}
    
  </div>

{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %} 


{% endblock javascripts %}